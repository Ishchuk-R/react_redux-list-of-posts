{"version":3,"sources":["store/loading.ts","store/loaded.ts","store/posts.ts","store/error.ts","store/filter.ts","store/index.ts","helpers/api.ts","components/Start.tsx","components/CommentCard.tsx","components/PostCard.tsx","components/PostLists.tsx","components/Filter.tsx","App.tsx","index.tsx"],"names":["reducer","loading","action","type","loadedReducer","loaded","postReducer","posts","filter","post","id","idx","map","postId","commentList","comment","commentId","errorReducer","error","filterReducer","query","rootReducer","combineReducers","loadingReducer","isLoading","state","getLoaded","isError","getVisiblePosts","postsSearch","termSearch","length","body","toLowerCase","title","includes","store","createStore","composeWithDevTools","applyMiddleware","thunk","getAll","url","fetch","then","response","json","getPostsFromServer","a","postsFromServer","commentsFromServer","userFromServer","user","find","userId","Start","text","dispatch","useDispatch","useSelector","clickLoad","result","onClick","disabled","CommentCard","name","className","deleteCommentItem","src","alt","PostCard","deletePost","key","PostLists","Filter","dispath","onChange","e","target","value","placeholder","App","Root","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.031c5bc0.chunk.js","sourcesContent":["import { AnyAction } from 'redux';\n\n// Action types\nconst START_LOADING = 'START_LOADING';\nconst FINISH_LOADING = 'FINISH_LOADING';\n\n// Action creators\nexport const startLoading = () => ({ type: START_LOADING });\nexport const finishLoading = () => ({ type: FINISH_LOADING });\n\nconst reducer = (loading = false, action: AnyAction) => {\n  switch (action.type) {\n    case START_LOADING:\n      return true;\n\n    case FINISH_LOADING:\n      return false;\n\n    default:\n      return loading;\n  }\n};\n\nexport default reducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst lOADED = 'lOADED';\n\n// Action creators\nexport const setLoaded = () => ({ type: lOADED });\n\nconst loadedReducer = (loaded = false, action: AnyAction) => {\n  switch (action.type) {\n    case lOADED:\n      return true;\n    default:\n      return loaded;\n  }\n};\n\nexport default loadedReducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst SET_POSTS = 'SET_POSTS';\nconst DELETE_POST = 'DELETE_POST';\nconst DELETE_COMMENT = 'DELETE_COMMENT';\n\n// Action creators\nexport const setPosts = (posts: Post[]) => ({ type: SET_POSTS, posts });\nexport const deletePost = (idx: number) => ({ type: DELETE_POST, idx });\nexport const deleteCommentItem = (postId: number, commentId: number) => ({\n  type: DELETE_COMMENT, postId, commentId,\n});\n\n// message reducer receives only the `state.message` part, but not the entire Redux state\nconst postReducer = (posts: Post[] = [], action: AnyAction) => {\n  switch (action.type) {\n    case SET_POSTS:\n      return action.posts;\n    case DELETE_POST:\n      return [...posts].filter(post => post.id !== action.idx);\n    case DELETE_COMMENT:\n      return [...posts].map(post => (\n        (post.id === action.postId) ? {\n          ...post,\n          commentList: post.commentList!.filter(comment => comment.id !== action.commentId),\n        } : post\n      ));\n\n    default:\n      return posts;\n  }\n};\n\nexport default postReducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst IS_ERROR = 'IS_ERROR';\nconst NOT_ERROR = 'NOT_ERROR';\n\n// Action creators\nexport const setError = () => ({ type: IS_ERROR });\nexport const notError = () => ({ type: NOT_ERROR });\n\nconst errorReducer = (error = false, action: AnyAction) => {\n  switch (action.type) {\n    case IS_ERROR:\n      return true;\n    case NOT_ERROR:\n      return false;\n    default:\n      return error;\n  }\n};\n\nexport default errorReducer;\n","import { AnyAction } from 'redux';\n\n// Action types\nconst FILTER = 'FILTER';\n\n// Action creators\nexport const setFilter = (query: string) => ({ type: FILTER, query });\n\nconst filterReducer = (filter = '', action: AnyAction) => {\n  switch (action.type) {\n    case FILTER:\n      return action.query;\n    default:\n      return filter;\n  }\n};\n\nexport default filterReducer;\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunk from 'redux-thunk';\n\nimport loadingReducer from './loading';\nimport postReducer from './posts';\nimport loadedReducer from './loaded';\nimport errorReducer from './error';\nimport filterReducer from './filter';\n\n\n/**\n * Each concrete reducer will receive all the actions but only its part of the state\n *\n * const rootReducer = (state = {}, action) => ({\n *   loading: loadingReducer(state.loading, action),\n *   message: messageReducer(state.message, action),\n * })\n */\nconst rootReducer = combineReducers({\n  loading: loadingReducer,\n  posts: postReducer,\n  loaded: loadedReducer,\n  error: errorReducer,\n  filter: filterReducer,\n});\n\nconst searchPost = (postsSearch: Post[], termSearch: string) => {\n  if (termSearch.length === 0) {\n    return postsSearch;\n  }\n\n  return postsSearch.filter(post => {\n    const bodyNormalize = post.body.toLowerCase();\n    const titleNormalize = post.title.toLowerCase();\n\n    return (bodyNormalize + titleNormalize).includes(termSearch.toLowerCase());\n  });\n};\n\n\n// We automatically get types returned by concrete reducers\nexport type RootState = ReturnType<typeof rootReducer>;\n\n// Selectors - a function receiving Redux state and returning some data from it\nexport const isLoading = (state: RootState) => state.loading;\nexport const getContent = (state: RootState) => state.posts;\nexport const getLoaded = (state: RootState) => state.loaded;\nexport const isError = (state: RootState) => state.error;\nexport const getFilter = (state: RootState) => state.filter;\nexport const getVisiblePosts = (state: RootState) => {\n  return searchPost(state.posts, state.filter);\n};\n\nconst store = createStore(\n  rootReducer,\n  composeWithDevTools(applyMiddleware(thunk)),\n);\n\nexport default store;\n","const API_URL = 'https://mate-academy.github.io/react_dynamic-list-of-posts/api';\n\nexport const getAll = <T>(url: string): Promise<T> => {\n  return fetch(`${API_URL}/${url}.json`)\n    .then(response => response.json());\n};\n\nexport const getPostsFromServer = async () => {\n  const postsFromServer = await getAll<Post[]>('/posts');\n  const commentsFromServer = await getAll<Comment[]>('/comments');\n  const userFromServer = await getAll<User[]>('/users');\n\n  return postsFromServer.map(post => ({\n    ...post,\n    commentList: commentsFromServer.filter(comment => comment.postId === post.id),\n    user: userFromServer.find(user => user.id === post.userId),\n  }));\n};\n","import React from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { startLoading, finishLoading } from '../store/loading';\nimport { setLoaded } from '../store/loaded';\nimport { setPosts } from '../store/posts';\nimport { setError, notError } from '../store/error';\nimport { isLoading } from '../store';\nimport { getPostsFromServer } from '../helpers/api';\n\n\nexport const Start = ({ text }: {text: string}) => {\n  const dispatch = useDispatch();\n  const loading = useSelector(isLoading);\n\n  const clickLoad = async () => {\n    dispatch(startLoading());\n    try {\n      const result = await getPostsFromServer();\n\n      dispatch(setPosts(result));\n      dispatch(notError());\n    } catch (err) {\n      dispatch(setError());\n    } finally {\n      dispatch(finishLoading());\n      dispatch(setLoaded());\n    }\n  };\n\n  return (\n    <button\n      type=\"button\"\n      onClick={clickLoad}\n      disabled={loading}\n    >\n      {loading ? 'Loading...' : text}\n    </button>\n  );\n};\n","import React from 'react';\n\nimport { useDispatch } from 'react-redux';\nimport { deleteCommentItem } from '../store/posts';\n\n\nexport const CommentCard = ({\n  postId, name, body, id,\n}: Comment) => {\n  const dispatch = useDispatch();\n  const deleteComment = (postIdDel: number, idDel: number) => {\n    dispatch(deleteCommentItem(postIdDel, idDel));\n  };\n\n  return (\n    <div className=\"comment\">\n      <button\n        onClick={() => deleteComment(postId, id)}\n        type=\"button\"\n        className=\"btn btn-success\"\n      >\n        Delete comment\n      </button>\n      <div className=\"commentator-panel\">\n        <img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+PHN0eWxlPi5zdDEyM3tmaWxsOiNkZmUzZTh9PC9zdHlsZT48ZyBpZD0iTGF5ZXJfM18xXyI+PHBhdGggY2xhc3M9InN0MTIzIiBkPSJNMjAgMmM5LjkyNSAwIDE4IDguMDc1IDE4IDE4cy04LjA3NSAxOC0xOCAxOFMyIDI5LjkyNSAyIDIwIDEwLjA3NSAyIDIwIDJtMC0yQzguOTU0IDAgMCA4Ljk1NCAwIDIwczguOTU0IDIwIDIwIDIwIDIwLTguOTU0IDIwLTIwUzMxLjA0NiAwIDIwIDB6Ii8+PGNpcmNsZSBjbGFzcz0ic3QxMjMiIGN4PSIyMCIgY3k9IjE1LjMzMyIgcj0iOS4zMjYiLz48cGF0aCBjbGFzcz0ic3QxMjMiIGQ9Ik0yMCA0MGM1Ljg5MiAwIDExLjE3Mi0yLjU2MyAxNC44MzItNi42MTdhMTUuNDYxIDE1LjQ2MSAwIDAwLTcuMDU5LTkuMDk0QzI1LjY5IDI2LjEgMjIuOTc2IDI3LjIwMiAyMCAyNy4yMDJzLTUuNjktMS4xMDMtNy43NzMtMi45MTNhMTUuNDYxIDE1LjQ2MSAwIDAwLTcuMDU5IDkuMDk0QzguODI4IDM3LjQzNyAxNC4xMDggNDAgMjAgNDB6Ii8+PC9nPjwvc3ZnPg==\" alt=\"\" />\n        <div className=\"comment-name\">{name}</div>\n      </div>\n      <div>{body}</div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { CommentCard } from './CommentCard';\nimport { deletePost } from '../store/posts';\n\n\nexport const PostCard = ({\n  title, user, body, commentList, id,\n}: Post) => {\n  const dispatch = useDispatch();\n\n  const deletePosts = (idx: number) => {\n    dispatch(deletePost(idx));\n  };\n\n  return (\n    <div className=\"blog-post\">\n      <h3>{title}</h3>\n      <button\n        onClick={() => deletePosts(id)}\n        type=\"button\"\n        className=\"btn btn-warning\"\n      >\n        Delete this post\n      </button>\n      <p className=\"user text-primary\">{user ? user.name : 'Unknown'}</p>\n      <p className=\"blog-body\">{body}</p>\n      <div className=\"comment-list\">\n        {commentList ? (commentList.map(comment => (\n          <CommentCard key={comment.id} {...comment} />\n        ))\n        ) : null}\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { PostCard } from './PostCard';\nimport { getVisiblePosts } from '../store';\n\nexport const PostLists = () => {\n  const posts = useSelector(getVisiblePosts);\n\n  return (\n    <div>\n      {posts.map((post: Post) => (\n        <PostCard key={post.id} {...post} />\n      ))}\n    </div>\n  );\n};\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport { setFilter } from '../store/filter';\n\nexport const Filter = () => {\n  const dispath = useDispatch();\n  const filterChange = (e: { target: HTMLInputElement }) => {\n    dispath(setFilter(e.target.value));\n  };\n\n  return (\n    <div className=\"form-group\">\n      <input\n        className=\"form-control form-control-lg\"\n        onChange={filterChange}\n        type=\"text\"\n        placeholder=\"Find post...\"\n      />\n    </div>\n  );\n};\n","import React from 'react';\n\nimport './App.scss';\nimport { useSelector } from 'react-redux';\nimport { Start } from './components/Start';\nimport { PostLists } from './components/PostLists';\nimport { Filter } from './components/Filter';\nimport { getLoaded, isError } from './store';\n\n\nconst App = () => {\n  // const dispatch = useDispatch();\n  const loaded = useSelector(getLoaded);\n  const error = useSelector(isError);\n\n  return (\n    <div className=\"container\">\n      <h1>Redux list of posts</h1>\n      {error && (\n        <>\n          <h1>Error</h1>\n          <Start text=\"load again\" />\n        </>\n      )}\n      {!loaded\n        ? <Start text=\"load\" />\n        : (\n          <div>\n            <Filter />\n            <PostLists />\n          </div>\n        )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport App from './App';\nimport store from './store';\n\nconst Root = () => (\n  <Provider store={store}>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </Provider>\n);\n\nReactDOM.render(<Root />, document.getElementById('root'));\n"],"sourceRoot":""}